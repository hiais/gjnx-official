import fs from 'node:fs';
import path from 'node:path';
import matter from 'gray-matter';

const DEST_DIR = path.resolve('src/content/knowledge');

// Pre-defined Elite Glossary for Initial Enrichment (Generated by Antigravity AI)
const GLOSSARY = [
    {
        title: "NPU (Neural Processing Unit)",
        category: "èŠ¯ç‰‡æ¶æ„",
        description: "ä¸“é—¨ä¸ºåŠ é€Ÿç¥ç»ç½‘ç»œè¿ç®—è®¾è®¡çš„å¤„ç†å™¨ã€‚ç›¸æ¯” GPUï¼ŒNPU åœ¨å¤„ç† AI æ¨ç†ä»»åŠ¡ï¼ˆå¦‚å›¾åƒè¯†åˆ«ã€è¯­éŸ³å¤„ç†ï¼‰æ—¶å…·æœ‰æé«˜çš„èƒ½æ•ˆæ¯”ï¼Œæ˜¯ AI PC å’Œæ™ºèƒ½æ‰‹æœºå®ç°â€˜å…¨å¤©å€™ AIâ€™çš„å…³é”®ã€‚",
    },
    {
        title: "DVFS (åŠ¨æ€ç”µå‹é¢‘ç‡è°ƒæ•´)",
        category: "èƒ½æ•ˆä¼˜åŒ–",
        description: "ä¸€ç§é€šè¿‡å®æ—¶è°ƒæ•´å¤„ç†å™¨è¿è¡Œç”µå‹å’Œé¢‘ç‡æ¥é™ä½åŠŸè€—çš„æŠ€æœ¯ã€‚åœ¨è´Ÿè½½è¾ƒä½æ—¶é™ä½ç”µå‹é¢‘ç‡å¯å‘ˆå¹³æ–¹çº§é™ä½åŠŸè€—ï¼Œæ˜¯ç§»åŠ¨è®¾å¤‡ç»­èˆªä¼˜åŒ–çš„æ ¸å¿ƒæ‰‹æ®µã€‚",
    },
    {
        title: "Intel 18A",
        category: "åŠå¯¼ä½“å·¥è‰º",
        description: "è‹±ç‰¹å°”æ¨å‡ºçš„åŸƒç±³çº§åˆ¶ç¨‹å·¥è‰ºï¼ˆç›¸å½“äº 1.8nmï¼‰ã€‚å¼•å…¥äº† RibbonFET å…¨ç¯ç»•æ …ææ¶æ„å’Œ PowerVia èƒŒé¢ä¾›ç”µæŠ€æœ¯ï¼Œæ—¨åœ¨é‡å¤ºå…¨çƒèŠ¯ç‰‡èƒ½æ•ˆä¸æ€§èƒ½çš„å·…å³°ã€‚",
    },
    {
        title: "SOH (ç”µæ± å¥åº·çŠ¶æ€)",
        category: "ç”µæ± æŠ€æœ¯",
        description: "State of Healthï¼Œè¡¡é‡ç”µæ± ç›¸å¯¹äºæ–°ç”µæ± æ—¶çš„è¡°å‡ç¨‹åº¦ã€‚é€šè¿‡ AI ç®—æ³•é¢„æµ‹ SOH å˜åŒ–ï¼Œèƒ½æœ‰æ•ˆå»¶é•¿ç”µåŠ¨è½¦å’Œæ‰‹æœºç”µæ± çš„ä½¿ç”¨å¯¿å‘½å¹¶é¢„é˜²çƒ­å¤±æ§é£é™©ã€‚",
    },
    {
        title: "PUE (ç”µæºä½¿ç”¨æ•ˆç‡)",
        category: "ç®—åŠ›åŸºç¡€è®¾æ–½",
        description: "Power Usage Effectivenessï¼Œæ•°æ®ä¸­å¿ƒæ€»èƒ½è€—ä¸ IT è®¾å¤‡èƒ½è€—çš„æ¯”å€¼ã€‚PUE è¶Šæ¥è¿‘ 1.0ï¼Œä»£è¡¨æ•°æ®ä¸­å¿ƒçš„å†·å´å’Œé…ç”µæŸè€—è¶Šä½ï¼Œèƒ½æ•ˆè¶Šé«˜ã€‚",
    },
    {
        title: "TDP (çƒ­è®¾è®¡åŠŸè€—)",
        category: "ç¡¬ä»¶å‚æ•°",
        description: "Thermal Design Powerï¼Œä»£è¡¨å¤„ç†å™¨åœ¨é‡è´Ÿè½½ä¸‹äº§ç”Ÿçš„æœ€å¤§çƒ­é‡ã€‚å®ƒæ˜¯æ•£çƒ­å™¨è®¾è®¡çš„åŸºå‡†ã€‚æ³¨æ„ï¼šTDP å¹¶ä¸ç­‰åŒäºå®é™…è¿è¡Œæ—¶çš„å®æ—¶åŠŸè€—ã€‚",
    },
    {
        title: "PPW (æ¯ç“¦æ€§èƒ½å›æŠ¥)",
        category: "èƒ½æ•ˆè¯„ä»·",
        description: "Performance Per Wattï¼Œè¡¡é‡åœ¨æ¶ˆè€—å•ä½åŠŸç‡æ—¶æ‰€èƒ½äº§å‡ºçš„æ€§èƒ½ã€‚å¯¹äºè¾¹ç¼˜ä¾§ AI å’Œç§»åŠ¨è®¡ç®—ï¼ŒPPW æ˜¯æ¯”å•çº¯çš„å³°å€¼æ€§èƒ½æ›´é‡è¦çš„è¯„ä»·æŒ‡æ ‡ã€‚",
    }
];

async function generate() {
    console.log(`ğŸ§  AI Wiki Generator Activated`);

    if (!fs.existsSync(DEST_DIR)) fs.mkdirSync(DEST_DIR, { recursive: true });

    for (const entry of GLOSSARY) {
        const slug = entry.title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');
        const filePath = path.join(DEST_DIR, `${slug}.md`);

        const frontmatter = {
            title: entry.title,
            date: new Date(),
            category: entry.category,
            description: entry.description.slice(0, 100) + '...'
        };

        const content = `\n# ${entry.title}\n\n${entry.description}\n\n---\n*æœ¬æ¡ç›®ç”± GJNX AI å¼•æ“è‡ªåŠ¨æŒ–æ˜å¹¶ç”Ÿæˆï¼Œæ—¨åœ¨æ„å»ºç¡…åŸºèƒ½æ•ˆé€šè¯†å¤§å¦ã€‚*`;

        const fileContent = matter.stringify(content, frontmatter);
        fs.writeFileSync(filePath, fileContent);
        console.log(`âœ… Wiki Entry Created: ${entry.title}`);
    }
}

generate();
